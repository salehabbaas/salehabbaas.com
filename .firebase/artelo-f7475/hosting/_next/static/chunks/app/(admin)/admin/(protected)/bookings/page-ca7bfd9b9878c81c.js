(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9874],{235:(e,t,a)=>{"use strict";a.d(t,{J:()=>r});var n=a(5155);a(2115);var s=a(5016);function r(e){let{className:t,...a}=e;return(0,n.jsx)("label",{className:(0,s.cn)("text-sm font-medium text-foreground/85",t),...a})}},1726:(e,t,a)=>{Promise.resolve().then(a.bind(a,3874))},3209:(e,t,a)=>{"use strict";a.d(t,{BT:()=>d,Wu:()=>o,ZB:()=>i,Zp:()=>r,aR:()=>l});var n=a(5155);a(2115);var s=a(5016);function r(e){let{className:t,...a}=e;return(0,n.jsx)("div",{className:(0,s.cn)("rounded-3xl border bg-card/90 text-card-foreground shadow-sm",t),...a})}function l(e){let{className:t,...a}=e;return(0,n.jsx)("div",{className:(0,s.cn)("flex flex-col space-y-1.5 p-6",t),...a})}function i(e){let{className:t,...a}=e;return(0,n.jsx)("h3",{className:(0,s.cn)("text-xl font-semibold tracking-tight",t),...a})}function d(e){let{className:t,...a}=e;return(0,n.jsx)("p",{className:(0,s.cn)("text-sm text-muted-foreground",t),...a})}function o(e){let{className:t,...a}=e;return(0,n.jsx)("div",{className:(0,s.cn)("p-6 pt-0",t),...a})}},3874:(e,t,a)=>{"use strict";a.d(t,{BookingsManager:()=>j});var n=a(5155),s=a(2115),r=a(9708),l=a(7003),i=a(3209),d=a(6170),o=a(235),c=a(7507),u=a(6633);function m(e){return e instanceof Date?e:new Date(e)}function p(e){return e.replace(/[:.]/g,"-")}function g(e,t,a){let n=m(e),s=m(t),r=!Number.isFinite(a)||a<=0?30:Math.floor(a);if(Number.isNaN(n.getTime())||Number.isNaN(s.getTime())||s<=n)return[];let l=[],i=new Date(n);for(;i<s;)l.push(i.toISOString()),i.setMinutes(i.getMinutes()+r);return l}var x=a(5316),h=a(5016);let b={enabled:!0,timezone:"America/Toronto",slotDurationMinutes:30,maxDaysAhead:30,workDays:[1,2,3,4,5],dayStartHour:9,dayEndHour:17,meetingTypes:[{id:"intro",label:"Intro Call",durationMinutes:30},{id:"project",label:"Project Discovery",durationMinutes:45},{id:"advisory",label:"Advisory Session",durationMinutes:60}]};function f(e){return e?"string"==typeof e?e:e instanceof Date?e.toISOString():"object"==typeof e&&e&&"toDate"in e&&"function"==typeof e.toDate?e.toDate().toISOString():"":""}function j(){let[e,t]=(0,s.useState)(b),[a,m]=(0,s.useState)([]),[j,y]=(0,s.useState)([]),[v,N]=(0,s.useState)("loading"),[A,k]=(0,s.useState)(""),[w,S]=(0,s.useState)({startAt:"",endAt:"",reason:""}),[D,T]=(0,s.useState)({id:"",label:"",durationMinutes:30});(0,s.useEffect)(()=>{let a=(0,r.aQ)((0,r.H9)(x.db,"bookingSettings","default"),e=>{if(!e.exists())return;let a=e.data();t(e=>({...e,...a,meetingTypes:Array.isArray(a.meetingTypes)?a.meetingTypes:e.meetingTypes,workDays:Array.isArray(a.workDays)?a.workDays:e.workDays}))}),n=(0,r.aQ)((0,r.P)((0,r.rJ)(x.db,"bookings"),(0,r.My)("startAt","asc")),e=>{m(e.docs.map(e=>{var t,a,n,s,r,l,i,d,o;let c=e.data();return{id:e.id,name:null!=(t=c.name)?t:"",email:null!=(a=c.email)?a:"",reason:null!=(n=c.reason)?n:"",timezone:null!=(s=c.timezone)?s:"",meetingTypeId:null!=(r=c.meetingTypeId)?r:"",meetingTypeLabel:null!=(l=c.meetingTypeLabel)?l:"",startAt:f(c.startAt),endAt:f(c.endAt),status:null!=(i=c.status)?i:"confirmed",googleMeetLink:null!=(d=c.googleMeetLink)?d:"",calendarEventId:null!=(o=c.calendarEventId)?o:"",createdAt:f(c.createdAt),updatedAt:f(c.updatedAt)}}))}),s=(0,r.aQ)((0,r.P)((0,r.rJ)(x.db,"blockedSlots"),(0,r.My)("startAt","asc")),e=>{y(e.docs.map(e=>{var t;let a=e.data();return{id:e.id,startAt:f(a.startAt),endAt:f(a.endAt),reason:null!=(t=a.reason)?t:"",createdAt:f(a.createdAt)}}))});return fetch("/api/admin/feature-flags").then(e=>e.json()).then(e=>{N(e.bookingEnabled?"enabled":"disabled")}).catch(()=>N(e.enabled?"enabled":"disabled")),()=>{a(),n(),s()}},[e.enabled]);let C=(0,s.useMemo)(()=>({upcoming:a.filter(e=>"cancelled"!==e.status&&new Date(e.startAt)>=new Date).length,cancelled:a.filter(e=>"cancelled"===e.status).length,total:a.length}),[a]);async function M(t){t.preventDefault(),await (0,r.BN)((0,r.H9)(x.db,"bookingSettings","default"),{...e,updatedAt:(0,r.O5)()},{merge:!0}),k("Booking settings saved.")}async function I(){let e="enabled"!==v;(await fetch("/api/admin/feature-flags",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({bookingEnabled:e})})).ok?(N(e?"enabled":"disabled"),k("Remote Config booking flag set to ".concat(e?"enabled":"disabled","."))):k("Failed to update Remote Config flag.")}async function B(){D.id&&D.label&&(t(e=>({...e,meetingTypes:[...e.meetingTypes,{id:D.id,label:D.label,durationMinutes:D.durationMinutes}]})),T({id:"",label:"",durationMinutes:30}))}async function E(e){window.confirm("Remove this meeting type?")&&t(t=>({...t,meetingTypes:t.meetingTypes.filter(t=>t.id!==e)}))}async function R(e){e.preventDefault(),await (0,r.gS)((0,r.rJ)(x.db,"blockedSlots"),{startAt:new Date(w.startAt),endAt:new Date(w.endAt),reason:w.reason,createdAt:(0,r.O5)()}),S({startAt:"",endAt:"",reason:""}),k("Blocked slot created.")}async function Z(e){window.confirm("Delete blocked slot?")&&(await (0,r.kd)((0,r.H9)(x.db,"blockedSlots",e)),k("Blocked slot removed."))}async function H(t,a){var n;let s=(0,r.H9)(x.db,"bookings",t.id),l=(0,r.wP)(x.db);l.update(s,{status:a,updatedAt:(0,r.O5)()});let i=(n=t.startAt,g(n,t.endAt,e.slotDurationMinutes).map(p)),d=g(t.startAt,t.endAt,e.slotDurationMinutes);("cancelled"===a||"rescheduled"===a)&&i.forEach(e=>{l.delete((0,r.H9)(x.db,"bookingSlotLocks",e))}),"confirmed"===a&&i.forEach((e,a)=>{var n;l.set((0,r.H9)(x.db,"bookingSlotLocks",e),{bookingId:t.id,slotStartAt:null!=(n=d[a])?n:t.startAt,startAt:new Date(t.startAt),endAt:new Date(t.endAt),status:"active",updatedAt:(0,r.O5)()},{merge:!0})}),await l.commit(),k("Booking marked as ".concat(a,"."))}return(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsx)(i.Zp,{children:(0,n.jsxs)(i.aR,{children:[(0,n.jsx)(i.ZB,{children:"Booking Management"}),(0,n.jsx)(i.BT,{children:"Manage availability, blocked times, and upcoming meetings."}),A?(0,n.jsx)("p",{className:"text-sm text-primary",children:A}):null]})}),(0,n.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,n.jsx)(i.Zp,{className:"bg-card/85",children:(0,n.jsxs)(i.Wu,{className:"pt-6",children:[(0,n.jsx)("p",{className:"text-xs text-muted-foreground",children:"Upcoming"}),(0,n.jsx)("p",{className:"mt-2 text-2xl font-semibold",children:C.upcoming})]})}),(0,n.jsx)(i.Zp,{className:"bg-card/85",children:(0,n.jsxs)(i.Wu,{className:"pt-6",children:[(0,n.jsx)("p",{className:"text-xs text-muted-foreground",children:"Cancelled"}),(0,n.jsx)("p",{className:"mt-2 text-2xl font-semibold",children:C.cancelled})]})}),(0,n.jsx)(i.Zp,{className:"bg-card/85",children:(0,n.jsxs)(i.Wu,{className:"pt-6",children:[(0,n.jsx)("p",{className:"text-xs text-muted-foreground",children:"Remote Config Flag"}),(0,n.jsx)("p",{className:"mt-2 text-2xl font-semibold",children:"loading"===v?"...":v})]})})]}),(0,n.jsxs)("div",{className:"grid gap-6 xl:grid-cols-2",children:[(0,n.jsxs)(i.Zp,{children:[(0,n.jsx)(i.aR,{children:(0,n.jsx)(i.ZB,{children:"Availability Settings"})}),(0,n.jsx)(i.Wu,{children:(0,n.jsxs)("form",{onSubmit:M,className:"space-y-3",children:[(0,n.jsxs)("div",{className:"grid gap-3 md:grid-cols-2",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(o.J,{children:"Enabled"}),(0,n.jsxs)(c.l,{value:String(e.enabled),onChange:e=>t(t=>({...t,enabled:"true"===e.target.value})),children:[(0,n.jsx)("option",{value:"true",children:"true"}),(0,n.jsx)("option",{value:"false",children:"false"})]})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(o.J,{children:"Timezone"}),(0,n.jsx)(d.p,{value:e.timezone,onChange:e=>t(t=>({...t,timezone:e.target.value}))})]})]}),(0,n.jsxs)("div",{className:"grid gap-3 md:grid-cols-3",children:[(0,n.jsx)(d.p,{type:"number",value:e.slotDurationMinutes,onChange:e=>t(t=>({...t,slotDurationMinutes:Number(e.target.value||30)})),placeholder:"Slot minutes"}),(0,n.jsx)(d.p,{type:"number",value:e.maxDaysAhead,onChange:e=>t(t=>({...t,maxDaysAhead:Number(e.target.value||30)})),placeholder:"Days ahead"}),(0,n.jsx)(d.p,{value:e.workDays.join(","),onChange:e=>t(t=>({...t,workDays:e.target.value.split(",").map(e=>Number(e.trim())).filter(e=>Number.isFinite(e))})),placeholder:"Work days (0-6)"})]}),(0,n.jsxs)("div",{className:"grid gap-3 md:grid-cols-2",children:[(0,n.jsx)(d.p,{type:"number",value:e.dayStartHour,onChange:e=>t(t=>({...t,dayStartHour:Number(e.target.value||9)})),placeholder:"Start hour"}),(0,n.jsx)(d.p,{type:"number",value:e.dayEndHour,onChange:e=>t(t=>({...t,dayEndHour:Number(e.target.value||17)})),placeholder:"End hour"})]}),(0,n.jsx)(l.$,{type:"submit",children:"Save Availability"}),(0,n.jsx)(l.$,{type:"button",variant:"outline",onClick:I,className:"ml-2",children:"Toggle Remote Config Booking Flag"})]})})]}),(0,n.jsxs)(i.Zp,{children:[(0,n.jsx)(i.aR,{children:(0,n.jsx)(i.ZB,{children:"Meeting Types"})}),(0,n.jsxs)(i.Wu,{className:"space-y-3",children:[(0,n.jsxs)("div",{className:"grid gap-2 md:grid-cols-3",children:[(0,n.jsx)(d.p,{placeholder:"ID",value:D.id,onChange:e=>T(t=>({...t,id:e.target.value}))}),(0,n.jsx)(d.p,{placeholder:"Label",value:D.label,onChange:e=>T(t=>({...t,label:e.target.value}))}),(0,n.jsx)(d.p,{type:"number",placeholder:"Duration",value:D.durationMinutes,onChange:e=>T(t=>({...t,durationMinutes:Number(e.target.value||30)}))})]}),(0,n.jsx)(l.$,{type:"button",onClick:B,children:"Add Meeting Type"}),(0,n.jsx)("div",{className:"space-y-2 text-sm",children:e.meetingTypes.map(e=>(0,n.jsxs)("div",{className:"flex items-center justify-between rounded-xl border border-border/70 bg-card/70 px-3 py-2",children:[(0,n.jsxs)("span",{children:[e.label," (",e.durationMinutes,"m)"]}),(0,n.jsx)(l.$,{size:"sm",variant:"outline",onClick:()=>E(e.id),children:"Remove"})]},e.id))})]})]})]}),(0,n.jsxs)("div",{className:"grid gap-6 xl:grid-cols-2",children:[(0,n.jsxs)(i.Zp,{children:[(0,n.jsx)(i.aR,{children:(0,n.jsx)(i.ZB,{children:"Blocked Dates / Times"})}),(0,n.jsxs)(i.Wu,{className:"space-y-3",children:[(0,n.jsxs)("form",{onSubmit:R,className:"space-y-2",children:[(0,n.jsx)(d.p,{type:"datetime-local",value:w.startAt,onChange:e=>S(t=>({...t,startAt:e.target.value})),required:!0}),(0,n.jsx)(d.p,{type:"datetime-local",value:w.endAt,onChange:e=>S(t=>({...t,endAt:e.target.value})),required:!0}),(0,n.jsx)(d.p,{placeholder:"Reason",value:w.reason,onChange:e=>S(t=>({...t,reason:e.target.value}))}),(0,n.jsx)(l.$,{type:"submit",children:"Block Slot"})]}),(0,n.jsx)("div",{className:"max-h-56 space-y-2 overflow-auto text-sm",children:j.map(e=>(0,n.jsxs)("div",{className:"rounded-xl border border-border/70 bg-card/70 p-3",children:[(0,n.jsxs)("p",{children:[(0,h.Yq)(e.startAt)," - ",(0,h.Yq)(e.endAt)]}),(0,n.jsx)("p",{className:"text-muted-foreground",children:e.reason||"No reason"}),(0,n.jsx)(l.$,{size:"sm",variant:"outline",className:"mt-2",onClick:()=>Z(e.id),children:"Remove"})]},e.id))})]})]}),(0,n.jsxs)(i.Zp,{children:[(0,n.jsx)(i.aR,{children:(0,n.jsx)(i.ZB,{children:"Upcoming Meetings"})}),(0,n.jsx)(i.Wu,{children:(0,n.jsxs)(u.XI,{children:[(0,n.jsx)(u.A0,{children:(0,n.jsxs)(u.Hj,{children:[(0,n.jsx)(u.nd,{children:"Start"}),(0,n.jsx)(u.nd,{children:"Name"}),(0,n.jsx)(u.nd,{children:"Type"}),(0,n.jsx)(u.nd,{children:"Status"}),(0,n.jsx)(u.nd,{children:"Actions"})]})}),(0,n.jsx)(u.BF,{children:a.map(e=>(0,n.jsxs)(u.Hj,{children:[(0,n.jsx)(u.nA,{children:(0,h.Yq)(e.startAt)}),(0,n.jsxs)(u.nA,{children:[(0,n.jsx)("p",{children:e.name}),(0,n.jsx)("p",{className:"text-xs text-muted-foreground",children:e.email})]}),(0,n.jsx)(u.nA,{children:e.meetingTypeLabel}),(0,n.jsx)(u.nA,{children:e.status}),(0,n.jsxs)(u.nA,{className:"space-x-2",children:[(0,n.jsx)(l.$,{size:"sm",variant:"ghost",onClick:()=>H(e,"cancelled"),children:"Cancel"}),(0,n.jsx)(l.$,{size:"sm",variant:"outline",onClick:()=>H(e,"rescheduled"),children:"Reschedule"})]})]},e.id))})]})})]})]})]})}},5016:(e,t,a)=>{"use strict";a.d(t,{Yq:()=>i,Yv:()=>l,cn:()=>r});var n=a(2821),s=a(5889);function r(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.QP)((0,n.$)(t))}function l(e){return e.toLowerCase().trim().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-")}function i(e){if(!e)return"";let t="string"==typeof e?new Date(e):e;return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric"}).format(t)}},5316:(e,t,a)=>{"use strict";a.d(t,{IG:()=>p,db:()=>m,j2:()=>u,sx:()=>h});var n=a(2078),s=a(9253),r=a(9708),l=a(8134),i=a(8871);a(792);let d={apiKey:"AIzaSyCTKIE_7IXBm0f-EdkXerbcaS-Pu7JXagE",authDomain:"artelo-f7475.firebaseapp.com",projectId:"artelo-f7475",storageBucket:"artelo-f7475.appspot.com",messagingSenderId:"277860542920",appId:"1:277860542920:web:f225a203dab92f710cf8fd",measurementId:"G-6VY4ZDE97S",databaseURL:"https://artelo-f7475-default-rtdb.europe-west1.firebasedatabase.app"},o=d.apiKey&&d.authDomain&&d.projectId?(0,n.Dk)().length?(0,n.Sx)():(0,n.Wp)(d):null,c="salehabbaas",u=o?(0,s.xI)(o):null,m=o?c?(0,r.aU)(o,c):(0,r.aU)(o):null,p=o?(0,l.c7)(o):null,g=null;async function x(){return o?(g||(g=(0,i.TT)().then(e=>e?(0,i.P5)(o):null)),g):null}async function h(e,t){if(!o)return;let a=await x();a&&(0,i.$s)(a,e,t),fetch("/api/analytics",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,...t})}).catch(()=>{})}},6170:(e,t,a)=>{"use strict";a.d(t,{p:()=>l});var n=a(5155),s=a(2115),r=a(5016);let l=s.forwardRef((e,t)=>{let{className:a,type:s,...l}=e;return(0,n.jsx)("input",{type:s,className:(0,r.cn)("flex h-10 w-full rounded-xl border border-input bg-background/90 px-3 py-2 text-sm shadow-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...l})});l.displayName="Input"},6633:(e,t,a)=>{"use strict";a.d(t,{A0:()=>l,BF:()=>i,Hj:()=>d,XI:()=>r,nA:()=>c,nd:()=>o});var n=a(5155);a(2115);var s=a(5016);function r(e){let{className:t,...a}=e;return(0,n.jsx)("div",{className:"w-full overflow-x-auto",children:(0,n.jsx)("table",{className:(0,s.cn)("w-full caption-bottom text-sm",t),...a})})}function l(e){let{className:t,...a}=e;return(0,n.jsx)("thead",{className:(0,s.cn)("[&_tr]:border-b",t),...a})}function i(e){let{className:t,...a}=e;return(0,n.jsx)("tbody",{className:(0,s.cn)("[&_tr:last-child]:border-0",t),...a})}function d(e){let{className:t,...a}=e;return(0,n.jsx)("tr",{className:(0,s.cn)("border-b transition-colors hover:bg-muted/50",t),...a})}function o(e){let{className:t,...a}=e;return(0,n.jsx)("th",{className:(0,s.cn)("h-10 px-4 text-left align-middle font-medium text-muted-foreground",t),...a})}function c(e){let{className:t,...a}=e;return(0,n.jsx)("td",{className:(0,s.cn)("p-4 align-middle",t),...a})}},7003:(e,t,a)=>{"use strict";a.d(t,{$:()=>o});var n=a(5155),s=a(2115),r=a(3101),l=a(6673),i=a(5016);let d=(0,r.F)("inline-flex items-center justify-center whitespace-nowrap rounded-full text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-muted",outline:"border border-border bg-transparent hover:bg-muted",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90"},size:{default:"h-10 px-5",sm:"h-9 px-4",lg:"h-12 px-6",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=s.forwardRef((e,t)=>{let{className:a,variant:s,size:r,asChild:o=!1,...c}=e,u=o?l.DX:"button";return(0,n.jsx)(u,{className:(0,i.cn)(d({variant:s,size:r,className:a})),ref:t,...c})});o.displayName="Button"},7507:(e,t,a)=>{"use strict";a.d(t,{l:()=>r});var n=a(5155);a(2115);var s=a(5016);function r(e){let{className:t,children:a,...r}=e;return(0,n.jsx)("select",{className:(0,s.cn)("h-10 w-full rounded-xl border border-input bg-background/90 px-3 py-2 text-sm shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",t),...r,children:a})}}},e=>{e.O(0,[2992,7138,3724,1125,8441,1255,7358],()=>e(e.s=1726)),_N_E=e.O()}]);